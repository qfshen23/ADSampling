import matplotlib.pyplot as plt
import numpy as np

'''
tiny5m	384	2048	10	60.98	34178	144			18	9000	16185	60.62	205
			15	69.2	50397	97			24	18000	30110	69.56	117
			20	74.5	66362	73			28	22000	34141	73.49	101
			25	78.53	82383	59			32	28000	39951	77.04	87
			30	81.6	98251	49			38	35000	46484	80.4	73.6
			35	84	114013	43			42	45000	56011	83.35	63.4
			40	86	129714	37.8			48	52000	62287	85.26	55.1
			45	87.65	145358	34.9			52	60000	69808	86.77	49.6
			50	89	161010	30.6			58	70000	78770	88.42	43.4
			55	90.17	176716	27.8			62	80000	88236	89.63	38.59
			60	91.18	192202	25.7			68	90000	97621	90.76	35.1
			65	92	207620	23.6			72	100000	107043	91.59	32.3
			70	92.78	223052	22			78	110000	116637	92.33	29.7
			75	93.4	238454	20.6			82	120000	126781	92.96	27.6
			80	93.92	253835	19.3			88	125000	131754	93.46	26.4
			85	94.41	269102	18.2			92	130000	136858	93.75	25.4
			90	94.82	284207	17.2			98	140000	146571	94.3	23.7
			95	95.23	299360	16.4			102	150000	156791	94.7	22.4
			100	95.59	314401	15.9			108	155000	161681	95.05	21.6
			105	95.95	329545	15.2			112	160000	166797	95.23	20.9
			110	96.25	344699	14.7			118	170000	177039	95.61	19.8
			125	97	389870	12.6			132	190000	197077	96.32	18.1
			135	97.45	419619	11.7			142	200000	207329	96.72	17.6
			145	97.8	449246	11			152	220000	227703	97.2	16.3
			150	97.98	463948	10.7			158	230000	237901	97.38	15.65
'''

# Data for original method
recall1 = [60.98, 69.2, 74.5, 78.53, 81.6, 84.0, 86.0, 87.65, 89.0, 90.17, 91.18, 92.0, 92.78, 93.4, 93.92, 94.41, 94.82, 95.23, 95.59, 95.95, 96.25, 97.0, 97.45, 97.8, 97.98]
qps1 = [144, 97, 73, 59, 49, 43, 37.8, 34.9, 30.6, 27.8, 25.7, 23.6, 22, 20.6, 19.3, 18.2, 17.2, 16.4, 15.9, 15.2, 14.7, 12.6, 11.7, 11, 10.7]
dco1 = [34178, 50397, 66362, 82383, 98251, 114013, 129714, 145358, 161010, 176716, 192202, 207620, 223052, 238454, 253835, 269102, 284207, 299360, 314401, 329545, 344699, 389870, 419619, 449246, 463948]

# Data for new method
recall2 = [60.62, 69.56, 73.49, 77.04, 80.4, 83.35, 85.26, 86.77, 88.42, 89.63, 90.76, 91.59, 92.33, 92.96, 93.46, 93.75, 94.3, 94.7, 95.05, 95.23, 95.61, 96.32, 96.72, 97.2, 97.38]
qps2 = [205, 117, 101, 87, 73.6, 63.4, 55.1, 49.6, 43.4, 38.59, 35.1, 32.3, 29.7, 27.6, 26.4, 25.4, 23.7, 22.4, 21.6, 20.9, 19.8, 18.1, 17.6, 16.3, 15.65]
dco2 = [16185, 30110, 34141, 39951, 46484, 56011, 62287, 69808, 78770, 88236, 97621, 107043, 116637, 126781, 131754, 136858, 146571, 156791, 161681, 166797, 177039, 197077, 207329, 227703, 237901]

# Plot Recall vs QPS
plt.figure(figsize=(10, 6))
plt.plot(recall1, qps1, 'b-o', label='Original')
plt.plot(recall2, qps2, 'r-o', label='New')
plt.xlabel('Recall (%)')
plt.ylabel('QPS (queries/s)')
plt.title('Recall vs QPS Comparison (TINY5M)')
plt.grid(True)
plt.legend()
plt.savefig('recall_vs_qps_tiny5m.png', dpi=400)
plt.close()

# Plot Distance Computations vs Recall
plt.figure(figsize=(10, 6))
plt.plot(recall1, [d/1000 for d in dco1], 'b-o', label='Original')
plt.plot(recall2, [d/1000 for d in dco2], 'r-o', label='New')
plt.xlabel('Recall (%)')
plt.ylabel('Distance Computations (K)')
plt.title('Recall vs Distance Computations (TINY5M)')
plt.grid(True)
plt.legend()
plt.savefig('recall_vs_dco_tiny5m.png', dpi=400)
plt.close()